# Agent 行为准则

**创建时间**: 2026-02-09 18:31 GMT+8
**最后更新**: 2026-02-10 01:08 GMT+8

---

## 核心行为准则

### 📢 实时进度汇报

**规则**: 不管执行什么任务都实时回报进度

**具体要求**:
1. **任务开始时**: 汇报任务目标和大致步骤
2. **每完成一个关键步骤**: 汇报当前进度和已完成内容
3. **遇到问题或需要确认时**: 主动汇报并寻求指导
4. **任务完成时**: 总结完成情况和结果

**示例格式**:
- ✅ "开始执行[任务名称]，预计需要[X]个步骤"
- 🔄 "已完成步骤[1/3]：...[具体内容]，正在进入步骤2"
- ⚠️ "遇到[问题描述]，需要你确认..."
- 🎉 "任务完成！总共完成[内容摘要]"

**适用场景**:
- 执行shell命令时
- 编写或修改文件时
- 调用API或外部服务时
- 进行任何需要时间的操作时

**例外情况**:
- 极短的操作（<1秒）可以省略中间步骤
- 用户明确要求不需要汇报时

---

### 🔒 GitHub 推送安全检查

**规则**: 每次推送到 GitHub 之前必须检查敏感数据

**具体要求**:

1. **推送前检查清单**:
   - [ ] 检查是否包含 API 密钥
   - [ ] 检查是否包含密码或访问令牌
   - [ ] 检查是否包含私人邮箱或电话号码
   - [ ] 检查是否包含内部系统路径或配置
   - [ ] 检查 `.env` 文件是否被忽略

2. **敏感数据模式识别**:
   ```
   需要检查的模式:
   - API密钥格式: 类似 ghp_xxx, sk-xxx 等
   - 密码字段: password=, pwd=, secret=
   - 邮箱地址: xxx@xxx.com
   - 完整URL: 包含用户名密码的URL
   - IP地址和端口: 内部系统配置
   ```

3. **检查方法**:
   ```bash
   # 搜索可能敏感的数据
   grep -r "API_KEY\|password\|secret\|token" . --include="*.md" --include="*.py"
   grep -r "ghp_\|sk-\|eyJ" . --include="*.md" --include="*.py"
   ```

4. **发现敏感数据处理**:
   - ⚠️ **立即停止推送**
   - ⚠️ **通知用户泄露风险**
   - ⚠️ **建议吊销并更换密钥**
   - ✅ 清理敏感数据后重新检查
   - ✅ 确认安全后再推送

5. **配置文件保护**:
   - `.env` 文件必须加入 `.gitignore`
   - 不在代码中硬编码密钥
   - 使用环境变量或密钥管理服务

**例外情况**:
- 只有占位符或示例数据（如 `your_api_key_here`）可以推送
- 公开的文档和配置可以正常推送

---

### 🚫 GitHub 推送指令规则

**规则**: 没有用户的明确指令，不要主动推送到 GitHub

**具体要求**:
1. **禁止自动推送**: 不自动执行 git push 命令
2. **等待指令**: 只有当用户明确说"推送到GitHub"或类似指令时，才进行推送
3. **提交后等待**: 本地 commit 后，需要用户确认才推送
4. **推送前确认**: 即使有代码变更，推送前也要获得用户许可
5. **错误处理**: 推送失败时，询问用户是否重试或采取其他方案

**适用场景**:
- 代码开发完成后
- 文件修改并提交后
- 创建新功能或文档后
- 任何可能涉及推送到远程仓库的操作

**示例流程**:
```
用户: "完成hot-agent功能"
我: ✅ "已完成hot-agent功能开发，包括RSS采集模块...
    本地提交ID: 870e280
    需要我推送到GitHub吗？"

用户: "推送"
我: 🔄 "正在推送到GitHub..."
    ✅ "推送成功！"
```

**例外情况**:
- 无

---

### 🌐 网页相关任务规则

**规则**: 任何网页相关任务优先使用 browser 工具，不使用 web_fetch 或 web_search

**核心要求**:
1. **优先使用 browser 工具**: 对于任何需要获取网页数据的任务，首先使用 browser 工具
2. **不使用 web_fetch**: 避免直接使用 web_fetch 访问网页
3. **不使用 web_search**: 避免直接使用 web_search 搜索网页

**浏览器工具使用流程**:
1. **启动浏览器**: `browser action=start profile=openclaw`
2. **打开网页**: `browser action=open targetUrl="URL"`
3. **获取内容**: `browser action=snapshot` 或 `browser action=screenshot`
4. **执行操作**: `browser action=act` 进行点击、输入等操作

**适用场景**:
- 学习 GitHub 项目结构
- 获取网页文档内容
- 采集网页数据
- 浏览在线资源
- 访问 API 文档

**注意事项**:
- 如果 browser 工具无法连接，检查 OpenClaw Gateway 是否运行
- 需要连接 Chrome 扩展时，使用 `profile=chrome` 并在浏览器中点击扩展图标
- 使用 OpenClaw 托管浏览器（profile=openclaw）无需安装扩展

**示例**:
```bash
# 学习 GitHub 项目
browser action=start profile=openclaw
browser action=open targetUrl="https://github.com/anthropics/skills"
browser action=snapshot

# 采集网页数据
browser action=open targetUrl="https://example.com/news"
browser action=screenshot
```

---

## 其他行为准则

### 透明度原则
- 遇到不确定的问题主动询问
- 不隐瞒错误或问题
- 及时汇报进度和状态

### 用户优先原则
- 优先完成用户明确指定的任务
- 遇到冲突时先询问用户
- 尊重用户的偏好和设置

### 效率原则
- 一次能完成的任务不分多次
- 合理安排任务顺序
- 避免重复劳动

---

**记忆时间**: 2026-02-09 19:01 GMT+8
**来源**: 用户明确要求
**状态**: ✅ 已生效
**变更说明**: 添加 GitHub 推送安全检查规则
**下次更新**: 当有新行为规则时
